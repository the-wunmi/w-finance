<%= render DS::Dialog.new do |dialog| %>
  <% dialog.with_header(title: t("banks.connect.title")) %>
  <% dialog.with_body do %>
    <%= styled_form_with url: external_items_path, method: :post, scope: :external_item, id: "bank-finalize-form" do |f| %>
      <%= f.hidden_field :provider, value: "doubleu" %>
      <%= f.hidden_field :public_token, value: @connection.id %>

      <div class="py-6 text-center space-y-3">
        <div class="mx-auto w-12 h-12 rounded-full bg-green-100 flex items-center justify-center">
          <%= icon("check", color: "success") %>
        </div>
        <div class="text-lg font-medium text-primary">
          <%= t("banks.connect.connected_title") %> <%= @bank.display_name || @bank.name %>
        </div>
        <p class="text-sm text-secondary">
          <%= t("banks.connect.connected_subtitle") %>
        </p>
      </div>
    <% end %>
  <% end %>

  <% dialog.with_action(
    text: t("banks.connect.finish_button"),
    variant: "primary",
    type: "submit",
    form: "bank-finalize-form"
  ) %>
<% end %>


